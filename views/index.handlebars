<div id="home">
  <div class="container">
    <div class="row">
      <div class="col-8 offset-2">
        <h1>{{msg}}</h1>

        <h2>Welcome to CASTR</h2>

        <h2>This is our Home Page!</h2>

        <form class="clearfix mb-4" action="POST">
          <div class="form-group">
            <label for="example-text">Example Text</label>
            <input type="text" id="example-text" class="form-control" aria-describedby="example-text" placeholder="Enter Example Text">
          </div>
          <div class="form-group">
            <label for="example-description">Example Description</label>
            <textarea class="form-control" id="example-description" aria-describedby="example-description" placeholder="Enter Example Description"></textarea>
          </div>
          <button id="submit" class="btn btn-primary float-right">Submit</button>
        </form>
        <h3>Examples:</h3>
        <ul id="example-list" class="list-group">

          {{#each posts}}


          <li data-id="{{this.id}}" class="list-group-item">
            <a href="example/{{this.id}}">{{this.text}}</a>
            <button class="btn btn-danger float-right delete">ï½˜</button>
          </li>
          {{/each}}
        </ul>
      </div>
    </div>
    <!-- where the sign-in form will be displayed -->
      <div id="okta-login-container"></div>
  </div>
</div>

<!-- use the Okta widget to power authentication! -->
<script type="text/javascript">
  var oktaSignIn = new OktaSignIn({
    baseUrl: "https://dev-243399.okta.com",
    clientId: "0oa17yze2QPsrc85c4x6",
    authParams: {
      issuer: "default",
      responseType: ['token', 'id_token'],
      display: 'page'
    }
  });

  if (oktaSignIn.token.hasTokensInUrl()) {
    oktaSignIn.token.parseTokensFromUrl(
      // If we get here, the user just logged in.
      function success(res) {
        var accessToken = res[0];
        var idToken = res[1];

        oktaSignIn.tokenManager.add('accessToken', accessToken);
        oktaSignIn.tokenManager.add('idToken', idToken);

        window.location.hash='';
        document.getElementById("messageBox").innerHTML = "Hello, " + idToken.claims.email + "! You just logged in! :)";
      },
      function error(err) {
        console.error(err);
      }
    );
  } else {
    oktaSignIn.session.get(function (res) {
      // If we get here, the user is already signed in.
      if (res.status === 'ACTIVE') {
        document.getElementById("messageBox").innerHTML = "Hello, " + res.login + "! You are *still* logged in! :)";
        return;
      }
      oktaSignIn.renderEl(
        { el: '#okta-login-container' },
        function success(res) {},
        function error(err) {
          console.error(err);
        }
      );
    });
  }
</script>

<!--                                                        
 _____ __ __ _____    _____ _____ _____ _____ _____ _____ _____ 
|  _  |  |  |_   _|  | __  |   __|     |  |  |   __|   __|_   _|
|   __|  |  | | |    |    -|   __|  |  |  |  |   __|__   | | |  
|__|  |_____| |_|    |__|__|_____|__  _|_____|_____|_____| |_|  
                                    |__|                         
    -->

<script type="text/javascript"> //Script for sending PUT request
    $(".eat_burg").on("click", function(event) {
        var id = $(this).data("id");
        //console.log("Button pressed");

        // Send the PUT request.
        $.ajax("/burgers/update/" + id, {
        type: "PUT"
        }).then(
        function() {
            // Reload the page to get the updated list
            location.reload();
        });
    });
</script>
<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
<script src="/js/index.js"></script>
