<!-- PANEL OF IMAGE -->
<div class="post-full">
    <div id="post-main" class="columns main">
        <div id="post-column" class="column">
            {{#each posts}}
            <div class="card">
                <div class="card-image">
                    <figure class="image is-3by3">
                        <img class="post-image" src="{{this.post_image}}" onerror="this.src='/images/error.jpg'">
                    </figure>
                </div>
                <div class="card-content" id="post-content">
                    <div class="media-content">
                        <p class="post-title title is-4">{{this.post_title}}</p>
                        <p class="subtitle">{{this.post_user}}</p>
                    </div>
                    <div class="content post-body">{{this.post_body}}</div>
                    <div id="if-embed"></div>
                </div>
                <footer class="card-footer">
                    <p class="card-footer-item">
                    <span>
                        <a onclick="nextPage()" class="next_button" data-id="{{this.id}}">Next</a>
                    </span>
                    </p>
                    <p class="card-footer-item">
                    <span>
                        <a onclick="previousPage()" class="previous_button" data-id="{{this.id}}">Previous</a>
                    </span>
                    </p>
                </footer>
            </div>
            {{/each}}
        </div>


<article class="media">
  <div class="media-content">
    <div class="field">
      <p class="control">
        <textarea class="textarea" placeholder="Add a comment..." id="commentBody"></textarea>
      </p>
    </div>
    <div class="field">
      <p class="control">
        <button class="button" id="commentForm">Post comment</button>
      </p>
    </div>
  </div>
</article>



{{!-- NEXT PAGE, PREVIOUS PAGE BUTTONS --}}
<script type="text/javascript" id="CHANGING_BUTTON_LINK">
    function nextPage() {
        let dataIdN = $(".next_button").attr("data-id");
        let nextNum = parseInt(dataIdN) + 1;
        window.location.href = "/post/" + nextNum;
    };

    function previousPage() {
        let dataIdP = $(".previous_button").attr("data-id");
        let previousNum = parseInt(dataIdP) - 1;
        if (previousNum !== 0){
            window.location.href = "/post/" + previousNum;
        } //If previous is 0, don't go
    };
</script>

{{!-- EMBEDDING IFRAMES --}}
<script type="text/javascript" id="IFRAME_EMBED">
    $(document).ready(function() {
        let postBod = $(".post-body");
        console.log(postBod);
        let postBodVal = postBod[0].innerText;
        console.log(postBodVal);
        let ifEmbed = $("#if-embed");
        if (postBodVal.includes("<iframe")) {
           console.log("Has embed link");
           ifEmbed.append(postBodVal);
           postBod.remove();
        }
    });
</script>